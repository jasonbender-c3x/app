<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meowstik AI</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <header class="header">
      <div class="logo">
        <span class="logo-icon">üê±</span>
        <span class="logo-text">Meowstik</span>
      </div>
      <div class="status" id="connection-status">
        <span class="status-dot disconnected"></span>
        <span class="status-text">Disconnected</span>
      </div>
    </header>

    <main class="main">
      <div class="tabs">
        <button class="tab active" data-tab="chat">Chat</button>
        <button class="tab" data-tab="voice">Live Voice</button>
        <button class="tab" data-tab="capture">Screen</button>
        <button class="tab" data-tab="settings">Settings</button>
      </div>

      <div class="tab-content" id="chat-tab">
        <div class="chat-messages" id="chat-messages"></div>
        <div class="chat-input-container">
          <textarea id="chat-input" placeholder="Ask Meowstik anything..." rows="2"></textarea>
          <button id="send-btn" class="icon-btn" title="Send message">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="tab-content hidden" id="voice-tab">
        <div class="voice-container">
          <div class="voice-visualizer" id="voice-visualizer">
            <canvas id="audio-canvas" width="280" height="100"></canvas>
          </div>
          <div class="voice-status" id="voice-status">Press to start voice conversation</div>
          <button class="voice-btn" id="voice-btn">
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/>
              <path d="M19 10v2a7 7 0 0 1-14 0v-2M12 19v4M8 23h8"/>
            </svg>
          </button>
          <div class="voice-controls">
            <button class="small-btn" id="mute-btn" title="Mute">üîá</button>
            <button class="small-btn" id="speaker-btn" title="Speaker">üîä</button>
          </div>
        </div>
      </div>

      <div class="tab-content hidden" id="capture-tab">
        <div class="capture-container">
          <div class="capture-preview" id="capture-preview">
            <div class="capture-placeholder">No capture yet</div>
          </div>
          <div class="capture-actions">
            <button class="action-btn" id="capture-visible-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              </svg>
              Visible Area
            </button>
            <button class="action-btn" id="capture-full-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
              </svg>
              Full Page
            </button>
            <button class="action-btn" id="capture-select-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"/>
                <path d="m21 21-4.35-4.35"/>
              </svg>
              Select Element
            </button>
          </div>
          <button class="primary-btn" id="analyze-capture-btn" disabled>
            ü§ñ Analyze with AI
          </button>
        </div>
      </div>

      <div class="tab-content hidden" id="settings-tab">
        <div class="settings-container">
          <div class="setting-group">
            <label>Server URL</label>
            <input type="text" id="server-url" placeholder="wss://meowstik.replit.app">
          </div>
          <div class="setting-group">
            <label>Local Agent Port</label>
            <input type="number" id="agent-port" value="9222">
          </div>
          <div class="setting-group">
            <label class="toggle-label">
              <input type="checkbox" id="auto-connect">
              Auto-connect on startup
            </label>
          </div>
          <div class="setting-group">
            <label class="toggle-label">
              <input type="checkbox" id="voice-activation">
              Voice activation ("Hey Meowstik")
            </label>
          </div>
          <div class="setting-group">
            <label>Verbosity</label>
            <select id="verbosity-mode">
              <option value="muse">Muse (Silent)</option>
              <option value="quiet">Quiet (HD Audio on demand)</option>
              <option value="verbose" selected>Verbose (Speak all)</option>
              <option value="experimental">Experimental (Multi-voice)</option>
            </select>
          </div>
          <div class="setting-actions">
            <button class="primary-btn" id="save-settings-btn">Save Settings</button>
            <button class="action-btn" id="connect-btn">Connect</button>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer">
      <span class="version">v1.0.0</span>
      <a href="#" id="open-full-ui">Open Full UI ‚Üó</a>
    </footer>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
